<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
<!ENTITY RFC6242 SYSTEM "https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.6242.xml">
<!ENTITY RFC7926 SYSTEM "https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.7926.xml">
<!ENTITY RFC7950 SYSTEM "https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.7950.xml">
<!ENTITY RFC8040 SYSTEM "https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.8040.xml">
<!ENTITY RFC8233 SYSTEM "https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.8233.xml">
<!ENTITY RFC8341 SYSTEM "https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.8341.xml">
<!ENTITY RFC8342 SYSTEM "https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.8342.xml">
<!ENTITY RFC8446 SYSTEM "https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.8446.xml">
<!ENTITY I-D.ietf-teas-yang-te SYSTEM "https://xml2rfc.ietf.org/public/rfc/bibxml3/reference.I-D.ietf-teas-yang-te.xml">
<!ENTITY I-D.ietf-teas-yang-te-types SYSTEM "https://xml2rfc.ietf.org/public/rfc/bibxml3/reference.I-D.ietf-teas-yang-te-types.xml">
<!ENTITY I-D.ietf-teas-actn-vn-yang SYSTEM "https://xml2rfc.ietf.org/public/rfc/bibxml3/reference.I-D.ietf-teas-actn-vn-yang.xml">
<!ENTITY RFC3688 SYSTEM "https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.3688.xml">
<!ENTITY RFC6241 SYSTEM "https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.6241.xml">
<!ENTITY RFC7471 SYSTEM "https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.7471.xml">
<!ENTITY RFC7823 SYSTEM "https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.7823.xml">
<!ENTITY RFC8294 SYSTEM "https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.8294.xml">
<!ENTITY RFC8340 SYSTEM "https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.8340.xml">
<!ENTITY RFC8641 SYSTEM "https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.8641.xml">
<!ENTITY RFC8640 SYSTEM "https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.8640.xml">
<!ENTITY I-D.xu-actn-perf-dynamic-service-control SYSTEM "https://xml2rfc.ietf.org/public/rfc/bibxml3/reference.I-D.xu-actn-perf-dynamic-service-control.xml">
<!ENTITY RFC8309 SYSTEM "https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.8309.xml">
<!ENTITY RFC8453 SYSTEM "https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.8453.xml">
<!ENTITY RFC8570 SYSTEM "https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.8570.xml">
]>
<rfc submissionType="IETF" docName="draft-ietf-teas-actn-pm-telemetry-autonomics-01" category="std" ipr="trust200902">
	<!-- Generated by id2xml 1.5.0 on 2019-10-30T04:53:44Z -->
	<?rfc compact="yes"?>
	<?rfc text-list-symbols="o*+~"?>
	<?rfc subcompact="no"?>
	<?rfc sortrefs="yes"?>
	<?rfc symrefs="yes"?>
	<?rfc strict="yes"?>
	<?rfc toc="yes"?>
	<front>
	<title abbrev="VN/TE Perf Monitoring">YANG models for VN/TE Performance Monitoring Telemetry and Scaling Intent Autonomics</title>
    <author fullname="Young Lee" initials="Y" surname="Lee" role="editor">
    <organization>SKKU</organization>
      <address>
        <postal>
          <street/>
          <city/>
          <region/>
          <code/>
          <country/>
        </postal>
        <email>younglee.tx@gmail.com</email>
      </address>
  </author>
    <author initials="D" surname="Dhody" fullname="Dhruv Dhody" role="editor">
      <organization>Huawei Technologies</organization>
      <address>
        <postal>
          <street>Divyashree Techno Park, Whitefield</street>
          <city>Bangalore</city>
          <region>Karnataka</region>
          <code>560066</code>
          <country>India</country>
        </postal>
        <email>dhruv.ietf@gmail.com</email>
      </address>
    </author>
    <author initials="S" surname="Karunanithi" fullname="Satish Karunanithi">
      <organization>Huawei Technologies</organization>
      <address>
        <postal>
          <street>Divyashree Techno Park, Whitefield</street>
          <city>Bangalore</city>
          <region>Karnataka</region>
          <code>560066</code>
          <country>India</country>
        </postal>
        <email>satish.karunanithi@gmail.com</email>
      </address>
    </author>
<author fullname="Ricard Vilalta" initials="R" surname="Vilalta">
  <organization>CTTC</organization>
      <address>
        <postal>
          <street>Centre Tecnologic de Telecomunicacions de Catalunya (CTTC/CERCA)</street>
          <city>Barcelona</city>
          <region/>
          <code/>
          <country>Spain</country>
        </postal>
        <email>ricard.vilalta@cttc.es</email>
      </address>
  </author>
  <author fullname="Daniel King" initials="D" surname="King">
  <organization>Lancaster University</organization>
      <address>
        <postal>
          <street/>
          <city/>
          <region/>
          <code/>
          <country/>
        </postal>
        <email>d.king@lancaster.ac.uk</email>
      </address>
      </author>

  <author fullname="Daniele Ceccarelli" initials="D" surname="Ceccarelli">
  <organization>Ericsson</organization>
  <address><postal><street>Torshamnsgatan,48</street>
  <street>Stockholm, Sweden</street>
  </postal>
  <email>daniele.ceccarelli@ericsson.com</email>
  </address>
  </author>

  
	<date year="2019"/>
	<workgroup>TEAS Working Group</workgroup>
	<abstract><t>
   This document provides YANG data models that describe performance
   monitoring telemetry and scaling intent mechanism for TE-tunnels and
   Virtual Networks (VN).</t>

	<t>
   The models presented in this draft allow customers to subscribe to
   and monitor their key performance data of their interest on the
   level of TE-tunnel or VN. The models also provide customers with the
   ability to program autonomic scaling intent mechanism on the level
   of TE-tunnel as well as VN.</t>

	</abstract>
	</front>

	<middle>
	<section title="Introduction" anchor="sect-1"><t>
   The YANG model discussed in <xref target="I-D.ietf-teas-actn-vn-yang"/> is used to operate customer-driven
   Virtual Networks (VNs) during the VN instantiation, VN computation,
   and its life-cycle service management and operations. YANG model
   discussed in <xref target="I-D.ietf-teas-yang-te"/> is used to operate TE-tunnels during the
   tunnel instantiation, and its life-cycle management and operations.</t>

	<t>
   The models presented in this draft allow the applications hosted by
   the customers to subscribe to and monitor their key performance data
   of their interest on the level of VN <xref target="I-D.ietf-teas-actn-vn-yang"/> or TE-tunnel <xref target="I-D.ietf-teas-yang-te"/>.
   The key characteristic of the models presented in this document is a
   top-down programmability that allows the applications hosted by the
   customers to subscribe to and monitor key performance data of their
   interest and autonomic scaling intent mechanism on the level of VN
   as well as TE-tunnel.</t>

	<t>
   According to the classification of <xref target="RFC8309"/>, the YANG data models
   presented in this document can be classified as customer service
   models, which is mapped to CMI (Customer Network Controller (CNC)-
   Multi-Domain Service Coordinator (MSDC) interface) of ACTN
   <xref target="RFC8453"/>.</t>

	<t>
   <xref target="RFC8233"/> describes key network performance data to be considered
   for end-to-end path computation in TE networks. Key performance
   indicator (KPI) is a term that describes critical performance data
   that may affect VN/TE-tunnel service. The services provided can be
   optimized to meet the requirements (such as traffic patterns,
   quality, and reliability) of the applications hosted by the
   customers.</t>

	<t>
   This document provides YANG data models generically applicable to
   any VN/TE-Tunnel service clients to provide an ability to program
   their customized performance monitoring subscription and publication
   data models and automatic scaling in/out intent data models. These
   models can be utilized by a client network controller to initiate
   these capability to a transport network controller communicating
   with the client controller via a NETCONF <xref target="RFC8341"/> or a RESTCONF
   <xref target="RFC8040"/> interface.</t>

	<t>
   The term performance monitoring being used in this document is
   different from the term that has been used in transport networks for
   many years. Performance monitoring in this document refers to
   subscription and publication of streaming telemetry data.
   Subscription is initiated by the client (e.g., CNC) while
   publication is provided by the network (e.g., MDSC/PNC) based on the
   client's subscription. As the scope of performance monitoring in
   this document is telemetry data on the level of client's VN or TE-
   tunnel, the entity interfacing the client (e.g., MDSC) has to
   provide VN or TE-tunnel level information. This would require
   controller capability to derive VN or TE-tunnel level performance
   data based on lower-level data collected via PM counters in the
   Network Elements (NE). How the controller entity derives such
   customized level data (i.e., VN or TE-tunnel level) is out of the
   scope of this document.</t>

	<t>
   The data model includes configuration and state data according to
   the new Network Management Datastore Architecture <xref target="RFC8342"/>.</t>

	<section title="Terminology" anchor="sect-1.1"><t>
   Refer to <xref target="RFC8453"/>, <xref target="RFC7926"/>, and <xref target="RFC8309"/> for the key terms used
   in this document.</t>

	<t>
   Key Performance Data: This refers to a set of data the customer is
   interested in monitoring for their instantiated VNs or TE-tunnels.
   Key performance data and key performance indicators are inter-
   exchangeable in this draft.</t>

	<t>
   Scaling: This refers to the network ability to re-shape its own
   resources. Scale out refers to improve network performance by
   increasing the allocated resources, while scale in refers to
   decrease the allocated resources, typically because the existing
   resources are unnecessary.</t>

	<t>
   Scaling Intent: To declare scaling conditions, scaling intent is
   used. Specifically, scaling intent refers to the intent expressed by
   the client that allows the client to program/configure conditions of
   their key performance data either for scaling out or scaling in.
   Various conditions can be set for scaling intent on either VN or TE-
   tunnel level.</t>

	<t>
   Network Autonomics: This refers to the network automation capability
   that allows client to initiate scaling intent mechanisms and
   provides the client with the status of the adjusted network
   resources based on the client's scaling intent in an automated
   fashion.</t>

	</section>

	<section title="Tree diagram" anchor="sect-1.2"><t>
   A simplified graphical representation of the data model is used in
   Section 5 of this this document.  The meaning of the symbols in
   these diagrams is defined in <xref target="RFC8340"/>.</t>

	</section>

	<section title="Prefixes in Data Node Names" anchor="sect-1.3"><t>
   In this document, names of data nodes and other data model objects
   are prefixed using the standard prefix associated with the
   corresponding YANG imported modules, as shown in Table 1.</t>

	<texttable title="Prefixes and corresponding YANG modules" anchor="tab-prefixes-and-corresponding-yang-modules" style="full">
  <ttcol> Prefix</ttcol>
	<ttcol> YANG module</ttcol>
	<ttcol> Reference</ttcol>
	<!--<c>rt</c>
	<c>ietf-routing-types</c>
	<c><xref target="RFC8294"/></c>-->
	<c>te</c>
	<c>ietf-te</c>
	<c><xref target="I-D.ietf-teas-yang-te"/></c>
	<c>te-types</c>
	<c>ietf-te-types</c>
	<c><xref target="I-D.ietf-teas-yang-te-types"/></c>
	<c>te-tel</c>
	<c>ietf-te-kpi-telemetry</c>
	<c>[This I-D]</c>
	<c>vn</c>
	<c>ietf-vn</c>
	<c><xref target="I-D.ietf-teas-actn-vn-yang"/></c>
	<c>vn-tel</c>
	<c>ietf-vn-kpi-telemetry</c>
	<c>[This I-D]</c>
	</texttable>
	</section>

	</section>

	<section title="Use-Cases" anchor="sect-2">
   <t><xref target="I-D.xu-actn-perf-dynamic-service-control"/> describes use-cases relevant to this draft. It introduces the
   dynamic creation, modification and optimization of services based on
   the performance monitoring. Figure 1 shows a high-level workflows
   for dynamic service control based on traffic monitoring.</t>

	<figure title="Workflows for dynamic service control based on traffic monitoring" anchor="ure-workflows-for-dynamic-service-control-based-on-traffic-monitoring"><artwork><![CDATA[
   +----------------------------------------------+
   | Client   +-----------------------------+     |
   |          | Dynamic Service Control APP |     |
   |          +-----------------------------+     |
   +----------------------------------------------+
   1.Traffic|  /|\4.Traffic            | /|\
   Monitor& |   | Monitor              |  | 8.Traffic
   Optimize |   | Result     5.Service |  | modify &
   Policy   |   |              modify& |  | optimize
           \|/  |        optimize Req.\|/ | result
   +----------------------------------------------+
   | Orchestrator                                 |
   |    +-------------------------------+         |
   |    |Dynamic Service Control Agent  |         |
   |    +-------------------------------+         |
   |    +---------------+ +-------------------+   |
   |    | Flow Optimize | | vConnection Agent |   |
   |    +---------------+ +-------------------+   |
   +----------------------------------------------+
   2. Path |   /|\3.Traffic            | /|\
   Monitor |    | Monitor              |  |7.Path
   Request |    | Result      6.Path   |  | modify &
           |    |             modify&  |  | optimize
          \|/   |        optimize Req.\|/ | result
   +----------------------------------------------+
   | Network SDN Controller                       |
   |  +----------------------+ +-----------------+|
   |  | Network Provisioning | |Abstract Topology||
   |  +----------------------+ +-----------------+|
   |  +------------------+ +--------------------+ |
   |  |Network Monitoring| |Physical Topology DB| |
   |  +------------------+ +--------------------+ |
   +----------------------------------------------+
]]></artwork>
	</figure>

  <t>Some of the key points from <xref target="I-D.xu-actn-perf-dynamic-service-control"/> are as follows:
	<list style="symbols">
	<t>
	Network traffic monitoring is important to facilitate automatic
        discovery of the imbalance of network traffic, and initiate the
        network optimization, thus helping the network operator or the
        virtual network service provider to use the network more
        efficiently and save the Capital Expense (CAPEX) and the
        Operating Expense (OPEX).</t>
	<t>Customer services have various Service Level Agreement (SLA)
	requirements, such as service availability, latency, latency
        jitter, packet loss rate, Bit Error Rate (BER), etc. The
        transport network can satisfy service availability and BER
        requirements by providing different protection and restoration
        mechanisms. However, for other performance parameters, there
        are no such mechanisms. In order to provide high quality
        services according to customer SLA, one possible solution is to
        measure the SLA related performance parameters, and dynamically
        provision and optimize services based on the performance
        monitoring results.
	</t>
	<t>Performance monitoring in a large scale network could generate
	a huge amount of performance information. Therefore, the
        appropriate way to deliver the information in the client and
        network interfaces should be carefully considered.
	</t>
</list></t>


	</section>

	<section title="Design of the Data Models" anchor="sect-3"><t>
   The YANG models developed in this document describe two models:</t>

	<t><list style="hanging" hangIndent="7"><t hangText="(i)">
	TE KPI Telemetry Model which provides the TE-Tunnel level of
	<vspace blankLines="0"/>
	performance monitoring mechanism and scaling intent mechanism
          that allows scale in/out programming by the customer. (See
          <xref target="sect-3.1"/> &amp; <xref target="sect-7.1"/> for details).
	</t>

	<t hangText="(ii)">
	VN KPI Telemetry Model which provides the VN level of the
	<vspace blankLines="0"/>
	aggregated performance monitoring mechanism and scaling
          intent mechanism that allows scale in/out programming by the
          customer (See <xref target="sect-3.2"/> &amp; <xref target="sect-7.2"/> for details).
	</t>

	</list>
	</t>

	<section title="TE KPI Telemetry Model" anchor="sect-3.1"><t>
   This module describes performance telemetry for TE-tunnel model. The
   telemetry data is augmented to tunnel state.  This module also
   allows autonomic traffic engineering scaling intent configuration
   mechanism on the TE-tunnel level. Various conditions can be set for
   auto-scaling based on the telemetry data (See <xref target="sect-5"/> for details)</t>

	<t>
   The TE KPI Telemetry Model augments the TE-Tunnel Model to enhance
   TE performance monitoring capability. This monitoring capability
   will facilitate proactive re-optimization and reconfiguration of TEs
   based on the performance monitoring data collected via the TE KPI
   Telemetry YANG model.</t>

	<figure><artwork><![CDATA[
             +------------+          +--------------+
             |  TE-Tunnel |          |    TE KPI    |
             |   Model    |<---------|  Telemetry   |
             +------------+ augments |     Model    |
                                     +--------------+
]]></artwork>
	</figure>
	</section>

	<section title="VN KPI Telemetry Model" anchor="sect-3.2"><t>
   This module describes performance telemetry for VN model. The
   telemetry data is augmented both at the VN Level as well as
   individual VN member level. This module also allows autonomic
   traffic engineering scaling intent configuration mechanism on the VN
   level. Scale in/out criteria might be used for network autonomics in
   order the controller to react to a certain set of variations in
   monitored parameters (See <xref target="sect-4"/> for illustrations).</t>

	<t>
   Moreover, this module also provides mechanism to define aggregated
   telemetry parameters as a grouping of underlying VN level telemetry
   parameters. Grouping operation (such as maximum, mean) could be set
   at the time of configuration. For example, if maximum grouping
   operation is used for delay at the VN level, the VN telemetry data
   is reported as the maximum {delay_vn_member_1, delay_vn_member_2,..
   delay_vn_member_N}. Thus, this telemetry abstraction mechanism
   allows the grouping of a certain common set of telemetry values
   under a grouping operation. This can be done at the VN-member level
   to suggest how the E2E telemetry be inferred from the per domain
   tunnel created and monitored by PNCs. One proposed example is the
   following:</t>

	<figure><artwork><![CDATA[
  +------------------------------------------------------------+
  |                      Client                                |
  |                                                            |
  +------------------------------------------------------------+    
  1.Client sets the      |   /|\   2. Orchestrator pushes:
  grouping op, and       |    |
  subscribes to the      |    |    VN level telemetry for
  VN level telemetry for |    |    - VN Utilized-bw-percentage
  Delay and              |    |       (Minimum across VN Members)
  Utilized-bw-pecentage  |    |    - VN Delay (Maximum across VN
                        \|/   |     Members)
   +------------------------------------------------------------+
   | Orchestrator                                               |
   |                                                            |
   +------------------------------------------------------------+
]]></artwork>
	</figure>
	<t>
   The VN Telemetry Model augments the basic VN model to enhance VN
   monitoring capability. This monitoring capability will facilitate
   proactive re-optimization and reconfiguration of VNs based on the
   performance monitoring data collected via the VN Telemetry YANG
   model.</t>

	<figure><artwork><![CDATA[
             +----------+          +--------------+
             |    VN    | augments |      VN      |
             |   Model  |<---------|   Telemetry  |
             +----------+          |     Model    |
                                   +--------------+
]]></artwork>
	</figure>
	</section>

	</section>

	<section title="Autonomic Scaling Intent Mechanism" anchor="sect-4">
    <t>
   Scaling intent configuration mechanism allows the client to
   configure automatic scale-in and scale-out mechanisms on both the
   TE-tunnel and the VN level. Various conditions can be set for auto-
   scaling based on the PM telemetry data.</t>

	<t>There are a number of parameters involved in the mechanism:
  <list style="symbols">
  <t>scale-out-intent or scale-in-intent: whether to scale-out or
        scale-in.</t>
  <t>performance-type: performance metric type (e.g., one-way-delay,
        one-way-delay-min, one-way-delay-max, two-way-delay, two-way-
        delay-min, two-way-delay-max, utilized bandwidth, etc.)</t>
  <t>threshold-value: the threshold value for a certain performance-type that triggers scale-in or scale-out.</t>
	<t>scaling-operation-type: in case where scaling condition can be
	set with one or more performance types, then scaling-operation-type (AND, OR, MIN, MAX, etc.) is applied to these selected
        performance types and its threshold values.</t>
	<t>Threshold-time: the duration for which the criteria must hold
	true.</t>

	<t>Cooldown-time: the duration after a scaling action has been
	triggered, for which there will be no further operation.</t>

	</list></t>

	<t>
   The following tree is a part of ietf-te-kpi-telemetry tree whose
   model is presented in full detail in Sections 6 &amp; 7.</t>

	<figure><artwork><![CDATA[

module: ietf-te-kpi-telemetry
  augment /te:te/te:tunnels/te:tunnel:
    +--rw te-scaling-intent
    |  +--rw scale-in-intent
    |  |  +--rw threshold-time?      uint32
    |  |  +--rw cooldown-time?       uint32
    |  |  +--rw scaling-condition* [performance-type]
    |  |     +--rw performance-type           identityref
    |  |     +--rw threshold-value?           string
    |  |     +--rw scale-in-operation-type?
    |  |             scaling-criteria-operation
    |  +--rw scale-out-intent
    |     +--rw threshold-time?      uint32
    |     +--rw cooldown-time?       uint32
    |     +--rw scaling-condition* [performance-type]
    |        +--rw performance-type            identityref
    |        +--rw threshold-value?            string
    |        +--rw scale-out-operation-type?
    |                scaling-criteria-operation

]]></artwork>
	</figure>
	<t>
   Let say the client wants to set the scaling out operation based on
   two performance-types (e.g., two-way-delay and utilized-bandwidth
   for a te-tunnel), it can be done as follows:

	<list style="symbols">
	<t>Set Threshold-time: x (sec) (duration for which the criteria must hold true)</t>
	<t>Set Cooldown-time:	y (sec) (the duration after a scaling action has been triggered, for which there will be no further operation)
	</t>
	<t>Set AND for the scale-out-operation-type	</t>
	</list></t>

	<t>
   In the scaling condition's list, the following two components can be
   set:</t>

	<t>List 1: Scaling Condition for Two-way-delay
	<list style="symbols">
  <t>performance type: Two-way-delay</t>
  <t>threshold-value: z milli-seconds</t>
</list></t>

  <t>List 2: Scaling Condition for Utilized bandwidth
  <list style="symbols">
  <t>performance type: Utilized bandwidth</t>
  <t>threshold-value: w megabytes</t>
</list></t>
	</section>

	<section title="Notification" anchor="sect-5"><t>
   This model does not define specific notifications.  To enable
   notifications, the mechanism defined in <xref target="RFC8641"/>
   and <xref target="RFC8640"/> can be used.  This mechanism currently
   allows the user to:
  <list style="symbols">
	<t>Subscribe to notifications on a per client basis.</t>
	<t>Specify subtree filters or xpath filters so that only interested
      contents will be sent.</t>
  <t>Specify either periodic or on-demand notifications.</t>
	</list></t>
	

	

	<section title="YANG Push Subscription Examples" anchor="sect-5.1"><t>
   <xref target="RFC8641"/> allows subscriber applications to request a continuous,
   customized stream of updates from a YANG datastore.</t>

	<t>
   Below example shows the way for a client to subscribe to the
   telemetry information for a particular tunnel (Tunnel1). The
   telemetry parameter that the client is interested in is one-way-
   delay.</t>

	<figure><artwork><![CDATA[
<netconf:rpc netconf:message-id="101"
    xmlns:netconf="urn:ietf:params:xml:ns:netconf:base:1.0">
    <establish-subscription
       xmlns="urn:ietf:params:xml:ns:yang:ietf-yang-push:1.0">
       <filter netconf:type="subtree">
          <te xmlns="urn:ietf:params:xml:ns:yang:ietf-te">
             <tunnels>
                <tunnel>
                  <name>Tunnel1</name>
                  <identifier/>
                  <state>
                    <te-telemetry xmlns="urn:ietf:params:xml:ns:yang:
                                         ietf-te-kpi-telemetry">
                        <one-way-delay/>
                     </te-telemetry>
                  </state>
                 </tunnel>
              </tunnels>
          </te>
       </filter>
       <period>500</period>
       <encoding>encode-xml</encoding>
    </establish-subscription>
 </netconf:rpc>
]]></artwork>
	</figure>
	<t>
   This example shows the way for a client to subscribe to the
   telemetry information for all VNs. The telemetry parameter that the
   client is interested in is one-way-delay and one-way-utilized-
   bandwidth.</t>

	<figure><artwork><![CDATA[
<netconf:rpc netconf:message-id="101"
    xmlns:netconf="urn:ietf:params:xml:ns:netconf:base:1.0">
    <establish-subscription
       xmlns="urn:ietf:params:xml:ns:yang:ietf-yang-push:1.0">
       <filter netconf:type="subtree">
          <vn-state xmlns="urn:ietf:params:xml:ns:yang:ietf-vn">
             <vn>
                <vn-list>
                  <vn-id/>
                  <vn-name/>
                  <vn-telemetry xmlns="urn:ietf:params:xml:ns:yang:
                                        ietf-vn-kpi-telemetry">
                      <one-way-delay/>
                      <one-way-utilized-bandwidth/>
                  </vn-telemetry >
                </vn-list>
              </vn>
          </vn-state>
       </filter>
       <period>500</period>
    </establish-subscription>
 </netconf:rpc>
]]></artwork>
	</figure>
	</section>

	</section>

	<section title="YANG Data Tree" anchor="sect-6"><figure><artwork><![CDATA[

module: ietf-te-kpi-telemetry
  augment /te:te/te:tunnels/te:tunnel:
    +--rw te-scaling-intent
    |  +--rw scale-in-intent
    |  |  +--rw threshold-time?      uint32
    |  |  +--rw cooldown-time?       uint32
    |  |  +--rw scaling-condition* [performance-type]
    |  |     +--rw performance-type           identityref
    |  |     +--rw threshold-value?           string
    |  |     +--rw scale-in-operation-type?
    |  |             scaling-criteria-operation
    |  +--rw scale-out-intent
    |     +--rw threshold-time?      uint32
    |     +--rw cooldown-time?       uint32
    |     +--rw scaling-condition* [performance-type]
    |        +--rw performance-type            identityref
    |        +--rw threshold-value?            string
    |        +--rw scale-out-operation-type?
    |                scaling-criteria-operation
    +--ro te-telemetry
       +--ro id?                            string
       +--ro performance-metrics-one-way
       |  +--ro one-way-delay?                           uint32
       |  +--ro one-way-delay-normality?
       |  |       te-types:performance-metrics-normality
       |  +--ro one-way-residual-bandwidth?
       |  |       rt-types:bandwidth-ieee-float32
       |  +--ro one-way-residual-bandwidth-normality?
       |  |       te-types:performance-metrics-normality
       |  +--ro one-way-available-bandwidth?
       |  |       rt-types:bandwidth-ieee-float32
       |  +--ro one-way-available-bandwidth-normality?
       |  |       te-types:performance-metrics-normality
       |  +--ro one-way-utilized-bandwidth?
       |  |       rt-types:bandwidth-ieee-float32
       |  +--ro one-way-utilized-bandwidth-normality?
       |          te-types:performance-metrics-normality
       +--ro performance-metrics-two-way
          +--ro two-way-delay?             uint32
          +--ro two-way-delay-normality?
                  te-types:performance-metrics-normality



module: ietf-vn-kpi-telemetry
  augment /vn:vn/vn:vn-list:
    +--rw vn-scaling-intent
    |  +--rw scale-in-intent
    |  |  +--rw threshold-time?      uint32
    |  |  +--rw cooldown-time?       uint32
    |  |  +--rw scaling-condition* [performance-type]
    |  |     +--rw performance-type           identityref
    |  |     +--rw threshold-value?           string
    |  |     +--rw scale-in-operation-type?
    |  |             scaling-criteria-operation
    |  +--rw scale-out-intent
    |     +--rw threshold-time?      uint32
    |     +--rw cooldown-time?       uint32
    |     +--rw scaling-condition* [performance-type]
    |        +--rw performance-type            identityref
    |        +--rw threshold-value?            string
    |        +--rw scale-out-operation-type?
    |                scaling-criteria-operation
    +--ro vn-telemetry
       +--ro performance-metrics-one-way
       |  +--ro one-way-delay?                           uint32
       |  +--ro one-way-delay-normality?
       |  |       te-types:performance-metrics-normality
       |  +--ro one-way-residual-bandwidth?
       |  |       rt-types:bandwidth-ieee-float32
       |  +--ro one-way-residual-bandwidth-normality?
       |  |       te-types:performance-metrics-normality
       |  +--ro one-way-available-bandwidth?
       |  |       rt-types:bandwidth-ieee-float32
       |  +--ro one-way-available-bandwidth-normality?
       |  |       te-types:performance-metrics-normality
       |  +--ro one-way-utilized-bandwidth?
       |  |       rt-types:bandwidth-ieee-float32
       |  +--ro one-way-utilized-bandwidth-normality?
       |          te-types:performance-metrics-normality
       +--ro performance-metrics-two-way
       |  +--ro two-way-delay?             uint32
       |  +--ro two-way-delay-normality?
       |          te-types:performance-metrics-normality
       +--ro grouping-operation?            grouping-operation
  augment /vn:vn/vn:vn-list/vn:vn-member-list:
    +--ro vn-member-telemetry
       +--ro performance-metrics-one-way
       |  +--ro one-way-delay?                           uint32
       |  +--ro one-way-delay-normality?
       |  |       te-types:performance-metrics-normality
       |  +--ro one-way-residual-bandwidth?
       |  |       rt-types:bandwidth-ieee-float32
       |  +--ro one-way-residual-bandwidth-normality?
       |  |       te-types:performance-metrics-normality
       |  +--ro one-way-available-bandwidth?
       |  |       rt-types:bandwidth-ieee-float32
       |  +--ro one-way-available-bandwidth-normality?
       |  |       te-types:performance-metrics-normality
       |  +--ro one-way-utilized-bandwidth?
       |  |       rt-types:bandwidth-ieee-float32
       |  +--ro one-way-utilized-bandwidth-normality?
       |          te-types:performance-metrics-normality
       +--ro performance-metrics-two-way
       |  +--ro two-way-delay?             uint32
       |  +--ro two-way-delay-normality?
       |          te-types:performance-metrics-normality
       +--ro te-grouped-params*
       |       -> /te:te/tunnels/tunnel/te-kpi:te-telemetry/id
       +--ro grouping-operation?            grouping-operation

]]></artwork>
	</figure>
	</section>

	<section title="Yang Data Model" anchor="sect-7"><section title="ietf-te-kpi-telemetry model" anchor="sect-7.1"><t>
   The YANG code is as follows:</t>

	<figure><artwork><![CDATA[
 <CODE BEGINS> file "ietf-te-kpi-telemetry@2019-10-30.yang"

module ietf-te-kpi-telemetry {
  yang-version 1.1;
  namespace "urn:ietf:params:xml:ns:yang:ietf-te-kpi-telemetry";
  prefix te-tel;

  import ietf-te {
    prefix te;
    reference
      "I-D.ietf-teas-yang-te: A YANG Data Model for Traffic
       Engineering Tunnels and Interfaces";
  }
  import ietf-te-types {
    prefix te-types;
    reference
      "I-D.ietf-teas-yang-te-types: Traffic Engineering Common
       YANG Types";
  }

  organization
    "IETF Traffic Engineering Architecture and Signaling (TEAS)
     Working Group";
  contact
    "WG Web:  <https://tools.ietf.org/wg/teas/>
     WG List: <mailto:teas@ietf.org>
     Editor:  Young Lee <leeyoung@huawei.com>
              Dhruv Dhody <dhruv.ietf@gmail.com>";
  description
    "This module describes YANG data model for performance
     monitoring telemetry for te tunnels.

     Copyright (c) 2019 IETF Trust and the persons identified
     as authors of the code.  All rights reserved.

     Redistribution and use in source and binary forms, with
     or without modification, is permitted pursuant to, and
     subject to the license terms contained in, the Simplified
     BSD License set forth in Section 4.c of the IETF Trust's
     Legal Provisions Relating to IETF Documents
     (http://trustee.ietf.org/license-info).

     This version of this YANG module is part of RFC XXXX; see
     the RFC itself for full legal notices.";

  /* Note: The RFC Editor will replace XXXX with the number 
     assigned to the RFC once draft-ietf-teas-pm-telemetry-
     autonomics becomes an RFC.*/

  revision 2019-10-30 {
    description
      "Initial revision.";
    reference
      "RFC XXXX: YANG models for VN/TE Performance Monitoring
       Telemetry and Scaling Intent Autonomics";
  }

  identity telemetry-param-type {
    description
      "Base identity for telemetry param types";
  }

  identity one-way-delay {
    base telemetry-param-type;
    description
      "To specify average Delay in one (forward)
       direction";
    reference
      "RFC7471: OSPF Traffic Engineering (TE) Metric Extensions.
       RFC8570: IS-IS Traffic Engineering (TE) Metric Extensions.
       RFC7823: Performance-Based Path Selection for Explicitly
       Routed Label Switched Paths (LSPs) Using TE Metric
       Extensions";
  }

  identity two-way-delay {
    base telemetry-param-type;
    description
      "To specify average Delay in both (forward and reverse)
       directions";
    reference
      "RFC7471: OSPF Traffic Engineering (TE) Metric Extensions.
       RFC8570: IS-IS Traffic Engineering (TE) Metric Extensions.
       RFC7823: Performance-Based Path Selection for Explicitly
       Routed Label Switched Paths (LSPs) Using TE Metric
       Extensions";
  }

  identity one-way-delay-variation {
    base telemetry-param-type;
    description
      "To specify average Delay Variation in one (forward) direction";
    reference
      "RFC7471: OSPF Traffic Engineering (TE) Metric Extensions.
       RFC8570: IS-IS Traffic Engineering (TE) Metric Extensions.
       RFC7823: Performance-Based Path Selection for Explicitly
       Routed Label Switched Paths (LSPs) Using TE Metric
       Extensions";
  }

  identity two-way-delay-variation {
    base telemetry-param-type;
    description
      "To specify average Delay Variation in both (forward and reverse)
       directions";
    reference
      "RFC7471: OSPF Traffic Engineering (TE) Metric Extensions.
       RFC8570: IS-IS Traffic Engineering (TE) Metric Extensions.
       RFC7823: Performance-Based Path Selection for Explicitly
       Routed Label Switched Paths (LSPs) Using TE Metric
       Extensions";
  }

  identity utilized-bandwidth {
    base telemetry-param-type;
    description
      "To specify utilized bandwidth over the specified source
       and destination.";
    reference
      "RFC7471: OSPF Traffic Engineering (TE) Metric Extensions.
       RFC8570: IS-IS Traffic Engineering (TE) Metric Extensions.
       RFC7823: Performance-Based Path Selection for Explicitly
       Routed Label Switched Paths (LSPs) Using TE Metric
       Extensions";
  }

  identity utilized-percentage {
    base telemetry-param-type;
    description
      "To specify utilization percentage of the entity
       (e.g., tunnel, link, etc.)";
  }

  typedef scaling-criteria-operation {
    type enumeration {
      enum AND {
        description
          "AND operation";
      }
      enum OR {
        description
          "OR operation";
      }
    }
    description
      "Operations to analize list of scaling criterias";
  }

  grouping scaling-duration {
    description
      "Base scaling criteria durations";
    leaf threshold-time {
      type uint32;
      units "seconds";
      description
        "The duration for which the criteria must hold true";
    }
    leaf cooldown-time {
      type uint32;
      units "seconds";
      description
        "The duration after a scaling-in/scaling-out action has been
         triggered, for which there will be no further operation";
    }
  }

  grouping scaling-criteria {
    description
      "Grouping for scaling criteria";
    leaf performance-type {
      type identityref {
        base telemetry-param-type;
      }
      description
        "Reference to the tunnel level telemetry type";
    }
    leaf threshold-value {
      type string;
      description
        "Scaling threshold for the telemetry parameter type";
    }
  }

  grouping scaling-in-intent {
    description
      "Basic scaling in intent";
    uses scaling-duration;
    list scaling-condition {
      key "performance-type";
      description
        "Scaling conditions";
      uses scaling-criteria;
      leaf scale-in-operation-type {
        type scaling-criteria-operation;
        default "AND";
        description
          "Operation to be applied to check between scaling criterias
           to check if the scale in threshold condition has been met.
           Defaults to AND";
      }
    }
  }

  grouping scaling-out-intent {
    description
      "Basic scaling out intent";
    uses scaling-duration;
    list scaling-condition {
      key "performance-type";
      description
        "Scaling conditions";
      uses scaling-criteria;
      leaf scale-out-operation-type {
        type scaling-criteria-operation;
        default "OR";
        description
          "Operation to be applied to check between scaling criterias
           to check if the scale out threshold condition has been met.
           Defauls to OR";
      }
    }
  }

  augment "/te:te/te:tunnels/te:tunnel" {
    description
      "Augmentation parameters for config scaling-criteria TE
       tunnel topologies. Scale in/out criteria might be used
       for network autonomics in order the controller to react
       to a certain set of monitored params.";
    container te-scaling-intent {
      description
        "scaling intent";
      container scale-in-intent {
        description
          "scale-in";
        uses scaling-in-intent;
      }
      container scale-out-intent {
        description
          "scale-out";
        uses scaling-out-intent;
      }
    }
    container te-telemetry {
      config false;
      description
        "telemetry params";
      leaf id {
        type string;
        description
          "Id of telemetry param";
      }
      uses te-types:performance-metrics-attributes;
    }
  }
}

<CODE ENDS>
]]></artwork>
	</figure>
	</section>

	<section title="ietf-vn-kpi-telemetry model" anchor="sect-7.2"><t>
   The YANG code is as follows:</t>

	<figure><artwork><![CDATA[
<CODE BEGINS> file "ietf-vn-kpi-telemetry@2019-10-30.yang"

module ietf-vn-kpi-telemetry {
  yang-version 1.1;
  namespace "urn:ietf:params:xml:ns:yang:ietf-vn-kpi-telemetry";
  prefix vn-tel;

  import ietf-vn {
    prefix vn;
    reference
      "I-D.ietf-teas-actn-vn-yang: A YANG Data Model for VN
       Operation";
  }
  import ietf-te {
    prefix te;
    reference
      "I-D.ietf-teas-yang-te: A YANG Data Model for Traffic
       Engineering Tunnels and Interfaces";
  }
  import ietf-te-types {
    prefix te-types;
    reference
      "I-D.ietf-teas-yang-te-types: Traffic Engineering Common
       YANG Types";
  }
  import ietf-te-kpi-telemetry {
    prefix te-kpi;
    reference
      "RFC XXXX: YANG models for VN/TE Performance Monitoring
       Telemetry and Scaling Intent Autonomics";
  }

  /* Note: The RFC Editor will replace YYYY with the number 
     assigned to the RFC once draft-lee-teas-actn-pm-telemetry
     -autonomics becomes an RFC.*/

  organization
    "IETF Traffic Engineering Architecture and Signaling (TEAS)
     Working Group";
  contact
    "WG Web:  <https://tools.ietf.org/wg/teas/>
     WG List: <mailto:teas@ietf.org>
     Editor:  Young Lee <leeyoung@huawei.com>
              Dhruv Dhody <dhruv.ietf@gmail.com>";
  description
    "This module describes YANG data models for performance
     monitoring telemetry for vn.

     Copyright (c) 2019 IETF Trust and the persons identified
     as authors of the code.  All rights reserved.

     Redistribution and use in source and binary forms, with
     or without modification, is permitted pursuant to, and
     subject to the license terms contained in, the Simplified
     BSD License set forth in Section 4.c of the IETF Trust's
     Legal Provisions Relating to IETF Documents
     (http://trustee.ietf.org/license-info).

     This version of this YANG module is part of RFC XXXX; see
     the RFC itself for full legal notices.";

  /* Note: The RFC Editor will replace XXXX with the number 
     assigned to the RFC once draft-lee-teas-pm-telemetry-
     autonomics becomes an RFC.*/

  revision 2019-10-30 {
    description
      "Initial revision.";
    reference
      "RFC XXXX: YANG models for VN/TE Performance Monitoring
       Telemetry and Scaling Intent Autonomics";
  }

  typedef grouping-operation {
    type enumeration {
      enum MINIMUM {
        description
          "Select the minimum param";
      }
      enum MAXIMUM {
        description
          "Select the maximum param";
      }
      enum MEAN {
        description
          "Select the MEAN of the params";
      }
      enum STD_DEV {
        description
          "Select the standard deviation of the monitored params";
      }
      enum AND {
        description
          "Select the AND of the params";
      }
      enum OR {
        description
          "Select the OR of the params";
      }
    }
    description
      "Operations to analize list of monitored params";
  }

  grouping vn-telemetry-param {
    description
      "augment of te-kpi:telemetry-param for VN specific params";
    leaf-list te-grouped-params {
      type leafref {
        path
          "/te:te/te:tunnels/te:tunnel/te-kpi:te-telemetry/te-kpi:id";
      }
      description
        "Allows the definition of a vn-telemetry param
         as a grouping of underlying TE params";
    }
    leaf grouping-operation {
      type grouping-operation;
      description
        "describes the operation to apply to
         te-grouped-params";
    }
  }

  augment "/vn:vn/vn:vn-list" {
    description
      "Augmentation parameters for state TE VN topologies.";
    container vn-scaling-intent {
      description
        "scaling intent";
      container scale-in-intent {
        description
          "VN scale-in";
        uses te-kpi:scaling-in-intent;
      }
      container scale-out-intent {
        description
          "VN scale-out";
        uses te-kpi:scaling-out-intent;
      }
    }
    container vn-telemetry {
      config false;
      description
        "VN telemetry params";
      uses te-types:performance-metrics-attributes;
      leaf grouping-operation {
        type grouping-operation;
        description
          "describes the operation to apply to the VN-members";
      }
    }
  }

  augment "/vn:vn/vn:vn-list/vn:vn-member-list" {
    description
      "Augmentation parameters for state TE vn member topologies.";
    container vn-member-telemetry {
      config false;
      description
        "VN member telemetry params";
      uses te-types:performance-metrics-attributes;
      uses vn-telemetry-param;
    }
  }
}

<CODE ENDS>
]]></artwork>
	</figure>
	</section>

	</section>

	<section title="Security Considerations" anchor="sect-8"><t>
   The YANG module specified in this document defines a schema for data
   that is designed to be accessed via network management protocols
   such as NETCONF <xref target="RFC6241"/> or RESTCONF <xref target="RFC8040"/>. The lowest NETCONF
   layer is the secure transport layer, and the mandatory-to-implement
   secure transport is Secure Shell (SSH) <xref target="RFC6242"/>. The lowest
   RESTCONF layer is HTTPS, and the mandatory-to-implement secure
   transport is TLS <xref target="RFC8446"/>.</t>

	<t>
   The NETCONF access control model <xref target="RFC8341"/> provides the means to
   restrict access for particular NETCONF users to a preconfigured
   subset of all available NETCONF protocol operations and content. The
   NETCONF Protocol over Secure Shell (SSH) <xref target="RFC6242"/> describes a
   method for invoking and running NETCONF within a Secure Shell (SSH)
   session as an SSH subsystem. The Network Configuration Access
   Control Model (NACM) <xref target="RFC8341"/> provides the means to restrict access
   for particular NETCONF or RESTCONF users to a preconfigured subset
   of all available NETCONF or RESTCONF protocol operations and
   content.</t>

	<t>
   A number of configuration data nodes defined in this document are
   writable/deletable (i.e., "config true"). These data nodes may be
   considered sensitive or vulnerable in some network environments.</t>

	<t>
   There are a number of data nodes defined in this YANG module that
   are writable/creatable/deletable (i.e., config true, which is the
   default).  These data nodes may be considered sensitive or
   vulnerable in some network environments.  Write operations (e.g.,
   edit-config) to these data nodes without proper protection can have
   a negative effect on network operations.  These are the subtrees and
   data nodes and their sensitivity/vulnerability:

	<list style="symbols">
	<t>/te:te/te:tunnels/te:tunnel/te-scaling-intent/scale-in-intent</t>
  <t>/te:te/te:tunnels/te:tunnel/te-scaling-intent/scale-out-intent</t>
	<t>/vn:vn/vn:vn-list/vn-scaling-intent/scale-in-intent</t>
  <t>/vn:vn/vn:vn-list/vn-scaling-intent/scale-out-intent</t>
  </list></t>

	</section>

	<section title="IANA Considerations" anchor="sect-9"><t>
   This document registers the following namespace URIs in the IETF XML
   registry <xref target="RFC3688"/>:</t>

	<figure><artwork><![CDATA[
--------------------------------------------------------------------
URI: urn:ietf:params:xml:ns:yang:ietf-te-kpi-telemetry
Registrant Contact: The IESG.
XML: N/A, the requested URI is an XML namespace.
--------------------------------------------------------------------

--------------------------------------------------------------------
URI: urn:ietf:params:xml:ns:yang:ietf-vn-kpi-telemetry
Registrant Contact: The IESG.
XML: N/A, the requested URI is an XML namespace.
--------------------------------------------------------------------
]]></artwork>
	</figure>
	<t>
   This document registers the following YANG modules in the YANG
   Module.</t>

	<t>
   Names registry <xref target="RFC7950"/>:</t>

	<figure><artwork><![CDATA[
--------------------------------------------------------------------
name:         ietf-te-kpi-telemetry
namespace:    urn:ietf:params:xml:ns:yang:ietf-te-kpi-telemetry
prefix:       te-tel
reference:    RFC XXXX (TDB)
--------------------------------------------------------------------

--------------------------------------------------------------------
name:         ietf-vn-kpi-telemetry
namespace:    urn:ietf:params:xml:ns:yang:ietf-vn-kpi-telemetry
prefix:       vn-tel
reference:    RFC XXXX (TDB)
--------------------------------------------------------------------
]]></artwork>
	</figure>
	</section>

	<section title="Acknowledgements" anchor="sect-10"><t>
   We thank Rakesh Gandhi, Tarek Saad and Igor Bryskin for useful
   discussions and their suggestions for this work.</t>

	</section>

	</middle>

	<back>
	<references title="Normative References">
	&RFC6242;
	&RFC7926;
	&RFC7950;
	&RFC8040;
	&RFC8233;
	&RFC8341;
	&RFC8342;
	&RFC8446;
	&I-D.ietf-teas-yang-te;
	&I-D.ietf-teas-yang-te-types;
	&I-D.ietf-teas-actn-vn-yang;
	</references>
	<references title="Informative References">
	&RFC3688;
	&RFC6241;
	&RFC7471;
	&RFC7823;
	&RFC8294;
	&RFC8340;
	&RFC8641;
	&RFC8640;
	&I-D.xu-actn-perf-dynamic-service-control;
	&RFC8309;
	&RFC8453;
	&RFC8570;
	</references>
	</back>

	</rfc>
	
